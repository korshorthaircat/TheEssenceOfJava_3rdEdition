# 네트워킹(Networking)
* 두 대 이상의 컴퓨터를 케이블로 연결해 네트워크를 구성하는 것
* 컴퓨터들을 서로 연결해 데이터를 손쉽게 주고받거나 주변기기를 함께 공유하고자 하는 노력에서 시작됨

## 서버(server)와 클라이언트(client)
* 컴퓨터간의 관계를 구분하는 개념
  * 서버(server)
    * 서비스를 제공하는 컴퓨터(service provider)
    * 하드웨어의 사양에 관계없이 서비스를 제공하는 소프트웨어가 실행되는 컴퓨터
      * 일반적으로 다수의 클라이언트에게 서비스를 제공하기 때문에 고사양의 하드웨어를 갖춘 컴퓨터인 경우가 많음(그러나 서버와 클라이언트를 하드웨어 사양으로 구분하는 것은 아님)
    * 서버가 제공하는 서비스의 종류에 따라 구분하는 다양한 서버가 있음
      * 예) 파일 서버, 메일 서버, 어플리케이션 서버 등
    * 서비스
      * 서버가 클라이언트로부터 요청받은 작업을 처리하여 그 결과를 제공하는 것
  * 클라이언트(client)
    * 서비스를 사용하는 컴퓨터(service user)
* 서버 프로그램과 클라이언트 프로그램
  * 서버가 서비스를 제공하기 위해 서버프로그램이 있어야 함
    * 일반 PC의 경우 주로 서버에 접속하는 클라이언트 역할을 수행하지만, FTP서버 프로그램(ex. FTP Serv-U)이나 웹서버프로그램(ex. Tomcat)을 설치하면 서버역할도 수행할 수 있음
  * 클라이언트가 서비스를 제공받기 위해 클라이언트 프로그램이 있어야 함
    * 예1) 웹서버에 접속해 정보를 얻기 위해 웹브라우저(클라이언트 프로그램)이 필요함
    * 예2) FTP서버에 접속해 파일을 전송받기 위해 FTP 클라이언트 프로그램(ex. 알FTP)이 필요함

### 서버 기반 모델(server-based model)과 P2P 모델(peer-to-peer model)
* 서버 기반 모델
  * 네트워크 구성시 전용서버를 두는 것
  * 특징
    * 안정적인 서비스의 제공이 가능함
    * 공유 데이터의 관리와 보안이 용이함
    * 서버 구축비용과 관리비용이 듬
* P2P 모델
  * 네트워크 구성시 별도의 전용서버 없이 각 클라이언트가 서버 역할을 동시에 수행하도록 하는 것
  * 특징
    * 서버 구축 및 운용비용을 절감할 수 있음
    * 자원의 활용을 극대화할 수 있음
    * 자원의 관리가 어려움
    * 보안 취약함

## IP 주소(IP address)
* 컴퓨터(host, 호스트)를 구별하는데 사용되는 고유값
* 인터넷에 연결된 모든 컴퓨터는 IP주소를 가짐
* 4바이트 정수로 구성됨
  * (0~255사이의 정수=1바이트값).(0~255사이의 정수).(0~255사이의 정수).(0~255사이의 정수)
* 네트워크 주소와 호스트 주소로 나뉨
  * 4바이트 IP주소 중 네트워크 주소와 호스트 주소가 각각 몇 비트를 차지하는지는 네트워크를 어떻게 구성하였느냐에 따라 다름
* IP주소의 네트워크 주소가 같다는 것의 의미
  * 두 호스트가 같은 네트워크에 포함되어 있다는 뜻
* IP주소와 서브넷마스크를 비트연산자 '&'로 연산하면 IP주소에서 네트워크 주소만은 뽑아낼 수 있음

## URL(Uniform Resource Locator)
* 인터넷에 존재하는 여러 서버들이 제공하는 자원에 접근할 수 있는 주소를 표현하기 위한 것
* 형태
  * `프로토콜://호스트명:포트번호/경로명/파일명?쿼리스트링#참조`
  * 예) http://www.codechobo.com:80/sample/hello.html?referer=codechobo#index1
    * 프로토콜
      * 자원에 접근하기 위해 서버와 통신하는데 사용되는 통신규약(예: http)
    * 호스트명
      * 자원을 제공하는 서버의 이름(예: www.codechobo.com)
    * 포트번호
      * 통신에 사용되는 서버의 포트번호(예: 80)
      * HTTP프로토콜에서는 80번 포트를 사용하므로, URL에서 포트번호 생략시 80으로 간주함
      * 각 프로토콜마다 통신에 사용하는 포트번호가 다르며, 생략되면 각 프로토콜의 기본 포트가 사용된다. 
    * 경로명
      * 접근하려는 자원이 저장된 서버상의 위치(예: /sample/)
    * 파일명
      * 접근하려는 자원의 이름(예: hello.html)
    * 쿼리
      * URL에서 ? 이후의 부분(예: referer=codechobo)
    * 참조(anchor)
      * URL에서 # 이후의 부분 (예: index1)

## URLConnection
* sun.net.www.protocol.http.HttpURLConnection
* 어플리케이션과 URL간 통신연결을 나타내는 클래스의 최상위 클래스(추상 클래스)
* URLConnection을 상속받아 구현한 클래스
  * HttpURLConnection
    * URL의 프로토콜이 http프로토콜일 때 openConnection()은 Http URLConnection을 반환함
  * JarURLConnection
* URLConnection을 사용해 연결하고자 하는 자원에 접근해 읽고 쓰기 가능

# 소켓 프로그래밍
* 소켓을 이용한 통신 프로그래밍
* 소켓(socket)
  * 프로세스간의 통신에 사용되는 양쪽 끝단(endpoint)
  * 비유) 서로 멀리 떨어진 두 사람이 통신하기 위해 필요한 전화기
* 자바는 java.net패키지를 통해 소켓 프로그래밍을 지원함
  * 소켓통신에 사용되는 프로토콜에 따라 다른 종류의 소켓을 구현하여 제공

## TCP와 UDP
* TCP/IP 프로토콜
  * 이기종 시스템간의 통신을 위한 표준 프로토콜, 프로토콜의 집합
### TCP와 UDP
* TCP/IP프로토콜에 포함됨
* OSI 7계층의 전송계층(transport layer)에 해당하는 프로토콜
* TCP와 UDP는 전송방식이 다르며, 각 방식에 따른 장단점이 있음 -> 어플리케이션의 특징에 따라 적절한 프로토콜을 선택해 사용해야 함

### TCP
* 연결방식
  * 연결기반(connection-oriented)
    * 연결 후 통신(비유: 전화기)
    * 1:1 통신방식
* 특징
  * 데이터의 경계를 구분 안함(byte-stream)
  * 신뢰성 있는 데이터 전송
    * 전송순서 보장
    * 수신여부 확인(데이터 손실되면 재전송함)
    * 패킷을 관리할 필요 없음
  * UDP보다 전송속도가 느림
  * 파일을 주고받는 데 적합
* 관련 클래스
  * Socket
  * ServerSocket

### UDP
* 연결방식
  * 비연결기반(connectionless-oriented)
    * 연결 없이 통신(비유: 소포)
    * 1:1, 1:n, n:n 통신방식
* 특징
  * 데이터의 경계를 구분함(datagram)
  * 신뢰성 없는 데이터 전송
    * 전송순서 바뀔 수 있음
    * 수신여부 확인 안함(데이터가 손실되어도 알 수 없음)
    * 패킷을 관리해주어야 함
  * TCP보다 전송속도가 빠름
  * 게임이나 동영상의 데이터를 전송하는 경우 적합(데이터가 중간에 손실되어 좀 끊기더라도 빠른 전송이 필요할 때)
* 관련 클래스
  * DatagramSocket
  * DatagramPacket
  * MulticastSocket

## TCP소켓 프로그래밍
* 클라이언트와 서버간의 일대일 통신
* 서버 프로그램과 클라이언트 프로그램간의 통신 과정
  > 1. 서버 프로그램에서는 서버소켓(ServerSocket)을 사용해 서버 컴퓨터의 특정 포트에서 클라이언트의 연결요청을 처리할 준비를 한다.
  > 2. 클라이언트 프로그램은 접속할 서버의 IP주소와 포트 정보를 가지고 소켓을 생성해 서버에 연결을 요청한다.
  > 3. 서버소켓은 클라이언트의 연결요청을 받으면 서버에 새로운 소켓을 생성해 클라이언트의 소켓과 연결되도록 한다.
  > 4. 클라이언트의 소켓과 새로 생성된 서버의 소켓은 서버소켓과 관계없이 일대일 통신을 한다.
  > 5. 실제 데이터는 소켓과 소켓간 주고받으며, 이 때 데이터를 주고받는 연결통로는 입출력스트림이다. 
* 서버소켓(ServerSocket)
  * 포트와 결합(bind)되어 포트를 통해 외부(원격 사용자)의 연결요청을 기다림
  * 연결요청이 올 때마다 새로운 소켓을 생성해 상대편 소켓과 통신할 수 있도록 연결함
  * 따라서 실제적인 데이터 통신은 서버소켓과 관계없이 소켓과 소켓간 이루어짐
    * 서버소켓은 '전화교환기'에, 소켓은 '전화기'에 비유될 수 있음
  * 서버소켓은 포트를 독점함 (한 포트에 하나의 ServerSocket만 연결할 수 있음)
    * 단, 프로토콜이 다르면 같은 포트를 공유할 수 있음
* 포트(port)
  * 호스트(컴퓨터)가 외부와 통신을 하기 위한 통로
  * 하나의 호스트는 65536개의 포트를 가지고 있으며, 포트는 번호(0~65535)로 구분됨
    * 보통 1023번 이하의 포트는 기존의 다른 통신 프로그램들(ex. FTP, Telnet ...)이 사용하고 있음
    * 1023번 이상의 번호 중 사용하지 않는 포트를 골라 사용하는 것이 좋음
  * 두 서버소켓이 서로 다른 프로토콜을 사용하는 경우 같은 포트를 사용할 수 있음
    * 포트는 같아도 클라이언트 프로그램이 프로토콜로 어떤 서버소켓과 연결되어야하는지 구별할 수 있기 때문
    * 그래도 가능하면 하나의 포토는 하나의 서버소켓만 사용하도록 하는 것이 바람직
* 소켓(Socket)
  * 프로세스간의 통신을 담당함 
  * InputStream과 OutputStream을 가지고 있음
    * 이 두 스트림을 통해 프로세스간 통신(입출력)이 이루어짐
      * 스트림들은 연결된 상대편 소켓의 스트림들과 교차연결됨
        * 한 소켓의 입력 스트림은 다른 한 소켓의 출력 스트림과 연결됨